import{_ as h,j as I,u as f,k,o as C,l as u,P as i,m as w,t as b,c as v,n as S,a,b as o,q as B,s as x,d as m,e as d,F as g,r as E,w as T,v as D,x as P,f as c,g as V,A as l,p as N,h as M,i as R}from"./index.f305ef6b.js";const A={setup(){const r=I({category:"misc"}),n=f();k(),C(()=>{p(),e(),y()});async function p(){try{const t=n.params.eventId;await u.getEventById(t)}catch(t){i.error(t)}}async function e(){try{const t=n.params.eventId;await w.getEventComments(t)}catch(t){i.error(t)}}async function y(){try{const t=n.params.eventId;await b.getTicketHolders(t)}catch(t){i.error(t)}}return{route:n,editable:r,account:v(()=>l.account),towerEvent:v(()=>l.towerEvent),comment:v(()=>l.comments),participants:v(()=>l.tickets),participating:v(()=>l.tickets.find(t=>t.profile.id==l.account.id)),async createTicket(){const t=n.params.eventId;await b.createTicket(t)},async cancelEventById(){try{const t=n.params.eventId;await u.cancelEventById(t),i.success("Event canceled successfully")}catch(t){i.error(t)}},async getEventById(){try{const t=n.params.eventId;await u.getEventById(t)}catch(t){i.error(t)}},async postComment(){try{const t=r.value;S.log(t);const _=n.params.eventId;await w.postComment(t,_),r.value={},await e()}catch(t){i.error(t)}}}}},F=r=>(N("data-v-c7191309"),r=r(),M(),r),H={key:0,class:"container-fluid bg dark"},L={class:"row"},j={class:"col-10 m-auto"},q={class:"row"},z={class:"col-9 m-auto about-card"},O={class:"card-title"},U={key:0,class:"btn btn-danger"},W={key:1,class:"btn btn-warning"},G={class:""},J={class:"row"},K={class:"col-12"},Q={key:0,class:"card bg-info"},X={class:"card-body"},Y={class:"row"},Z={class:"col-1"},$=["title","src"],tt={class:"input-group mb-3"},et={class:"input-group mb-3"},ot=F(()=>o("button",{class:"btn btn-outline-secondary",type:"button submit",id:"button-addon2"},"Comment",-1)),nt={key:0,class:"row"},at={class:"col-8 m-auto py-3"};function ct(r,n,p,e,y,t){const _=R("CommentCard");return e.towerEvent?(c(),a("div",H,[o("div",L,[o("div",j,[o("div",{class:"card event-pic",style:B({backgroundImage:`url(${e.towerEvent.coverImg})`})},null,4)])]),o("div",q,[o("div",z,[o("h5",O,[x(m(e.towerEvent.name)+" ",1),e.towerEvent.isCanceled?(c(),a("div",U," Cancelled ")):d("",!0),e.towerEvent.capacity==0?(c(),a("div",W," Sold Out ")):d("",!0)]),o("p",G,"description: "+m(e.towerEvent.description),1),o("p",null,"location: "+m(e.towerEvent.location),1),o("p",null,": tickets remaining: "+m(e.towerEvent.capacity),1),o("p",null,"Time of event: "+m(e.towerEvent.startDate.toLocaleDateString()),1),!e.participating&&e.towerEvent.capacity>=1&&!e.towerEvent.isCanceled?(c(),a("button",{key:0,onClick:n[0]||(n[0]=s=>e.createTicket()),class:"btn btn-info"},"Participate")):d("",!0)])]),o("div",J,[o("div",K,[e.participants[0]?(c(),a("div",Q,[o("div",X,[o("div",Y,[(c(!0),a(g,null,E(e.participants,s=>(c(),a("div",Z,[o("img",{class:"rounded-circle participant",title:s.profile.name,src:s.profile.picture,alt:""},null,8,$)]))),256))])])])):d("",!0)])]),o("div",tt,[o("form",{class:"m-auto pt-5",style:{width:"80vw"},onSubmit:n[2]||(n[2]=T(s=>e.postComment(),["prevent"]))},[o("div",et,[D(o("input",{"onUpdate:modelValue":n[1]||(n[1]=s=>e.editable.body=s),type:"text",class:"form-control",placeholder:"Write a comment","aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[P,e.editable.body]]),ot])],32)]),e.comment?(c(),a("div",nt,[(c(!0),a(g,null,E(e.comment,s=>(c(),a("div",at,[V(_,{comment:s},null,8,["comment"])]))),256))])):d("",!0),e.account.id==e.towerEvent.creatorId?(c(),a("button",{key:1,class:"btn btn-danger",onClick:n[3]||(n[3]=s=>e.cancelEventById())},"Cancel Event")):d("",!0)])):d("",!0)}const rt=h(A,[["render",ct],["__scopeId","data-v-c7191309"]]);export{rt as default};
